\documentclass[nocopyrightspace,preprint,9pt]{sigplanconf}

\usepackage{times-lite}
\usepackage{mathptm}
\usepackage{txtt}
\usepackage{stmaryrd}
\usepackage{code}
%\usepackage{ttquot}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{afterpage}
\usepackage{balance}
\usepackage{defs}
\usepackage{pldefs}
\usepackage{utils}
\usepackage[pdftex]{graphicx}
\usepackage{ifpdf}

\ifpdf
\setlength{\pdfpagewidth}{8.5in}
\setlength{\pdfpageheight}{11in}
\fi


% \input{../../../../vj/res/pagesizes}
% \input{../../../../vj/res/vijay-macros}
\newcommand\alt{\bnf}

\newcommand\Implies{\Rightarrow}

\newtheorem{example}{Example}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}

\newcommand\Xten{{\sf X10}}
\newcommand\DML{{ DML}}
\newcommand\FJ{{FJ}}
\newcommand\CFJ{{CFJ}}
\newcommand\java{{Java}}
\newcommand\Java{{\java}}
\newcommand\csharp{{C$\sharp$}}
\newcommand\FXten{{FX10}}

\begin{document}
\title{Constrained Types for Object-Oriented Languages}
\authorinfo{Vijay Saraswat\titlenote{IBM T.~J. Watson Research
Center, P.O. Box 704, Yorktown Heights NY 10598 USA}}{}
  {vsaraswa@us.ibm.com}
\authorinfo{Nathaniel Nystrom$^{\;*}$}{}
  {nystrom@us.ibm.com}
\authorinfo{Radha Jagadeesan\titlenote{School of CTI, DePaul
University, 243 S. Wabash Avenue, Chicago IL 60604 USA}}{}
  {rjagadeesan@cs.depaul.edu}
\authorinfo{Jens Palsberg\titlenote{UCLA Computer Science
Department, Boelter Hall, Los Angeles CA 90095 USA}}{}
  {palsberg@cs.ucla.edu}
\authorinfo{Christian Grothoff\titlenote{
Department of Computer Science, University of Denver,
2360 S. Gaylord Street, John
Green Hall, Room 214, Denver CO, 80208 USA}}{}
  {christian@grothoff.org}

\maketitle

% \conferenceinfo{POPL'08}{XXX}
% \copyrightyear{2008}
% \copyrightdata{[to be supplied]}

\begin{abstract}

\Xten{} is a modern object-oriented language designed for productivity
and performance in concurrent and distributed systems, such as
(heterogenous) multicores and clusters. In this context, dependent
types arise naturally: objects may be located at one of many places,
arrays may be multidimensional, activities may be associated with one
or more clocks, variables may be marked as shared or private following
an ownership discipline, etc.  A framework for dependent types offers
significant opportunities for detecting design errors statically,
documenting design decisions, eliminating costly runtime checks
(e.g.{} for array bounds, null values), and improving the quality of
generated code.

We present a simple, general framework for adding constraint-based
dependent types to nominally typed OO languages such as Java, \Xten{}
and Scala. The framework is parametric on an underlying constraint
system {\cal C}. Classes and interfaces are associated with {\em
properties}(= final instance fields). A type {\tt C(:c)} names a class
or interface {\tt C} and a {\em constraint} {\tt c} on
properties of {\tt C} and in-scope final variables.  Constraints
may also be associated with class definitions (representing
class invariants) and with method and constructor definitions
(representing preconditions). Dynamic casting is permitted.

We present many examples to illustrate that many common OO idioms and
OO type systems proposed recently can be naturally captured by
constrained types: specifically we discuss types for places, aliases,
ownership, arrays and clocks. We have implemented the type system (for
a simple equality-based constraint system) in \Xten{} 1.0 (available
at {\tt x10.sf.net}). We present a simple \FJ{} extension, {\tt
Constrained FJ}, and establish fundamental properties such as type
soundess. We compare this approach with relevant work in dependent
types, specifically, DML, and outline many areas of future work.

In conclusion, we believe that constrained types offer a natural,
simple, clean, and expressive extension to OO programming.
\end{abstract}

\section{Introduction}\label{sec:intro}
\input{intro}

\subsection{Related work}\label{sec:related}
\input{related}

\section{Constrained FJ}\label{sec:lang}
%II. Language design and rules (CFJ) (3.5 pages)

\input{lang}

\subsection{Semantics}
\label{sec:semantics}
\input{semantics}

\section{Applied constrained calculii}\label{sec:examples}
\input{examples}

\section{Implementation}\label{sec:implementation}
\input{impl}

\section{Conclusion and Future work}\label{sec:future}\label{sec:conclusions}
\input{future}
\input{conclusion}

\section*{Acknowledgments}

Igor Peshansky,
Lex Spoon,
Vincent Cave.

This material is based upon work supported by the Defense
Advanced Research Projects Agency under its Agreement No.
HR0011-07-9-0002.


\bibliographystyle{plain}
\bibliography{master}
\balance

% \appendix
% \onecolumn

% \section{An extended example}
% \input{longex}

\end{document}
