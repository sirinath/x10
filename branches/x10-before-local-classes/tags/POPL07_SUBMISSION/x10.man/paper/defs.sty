\newif\iflongproof
\longprooffalse
\newif\ifdraft
\newif\ifpreprint
\@ifclasswith{article}{draft}{\drafttrue}{\draftfalse}
\@ifclasswith{sigplanconf}{preprint}{\preprinttrue}{\preprintfalse}

\newcommand\trlabel[1]{\label{#1}\ifpreprint\textbf{(#1)}\fi}
\newcommand\trref[1]{\ifpreprint\textbf{\ref{#1} (#1)}\else\ref{#1}\fi}

\newcounter{thm}
\setcounter{thm}{1}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{dem}[thm]{Definition}

\newcommand\loc[1]{\ell_{#1}}

\newcommand\join{\sqcup}
\newcommand\meet{\sqcap}
\newcommand\sqlt{\sqsubset}
\newcommand\sqle{\sqsubseteq}
\newcommand\sqgt{\sqsupset}
\newcommand\sqge{\sqsupseteq}

% alignment to be used in array{rl} environment when align* is not allowed
\newcommand\backup{\!\!\!\!\!\!\!}

\newcommand\ljoin{\mathbin{\rtimes}}
\newcommand\rjoin{\mathbin{\ltimes}}

\newcommand\subsetapprox{\mathbin{\raisebox{2pt}{$\subset$}\!\!\!\!\!\!\!\raisebox{-2pt}{$\sim$}}}

\newcommand\ttamp{\ensuremath{\mbox{\normalfont\texttt \&}}}
\newcommand\intersect{\mathbin{\ttamp}}
\newcommand\bigttamp{\ensuremath{\mbox{\large \texttt \&}}}

\newcommand\all[2]{{#2}^{\forall#1}}
\newcommand\range[2]{#1..#2}
%\newcommand\all[2]{\forall#1.~#2}
%\newcommand\range[2]{#1,\dots,#2}

\newcommand\nop{\emph{no-op}}

\newcommand\fixspacing{\vspace{-5pt}\quad{}}

\newcommand\eat[1]{}

\renewcommand\bar[1]{\overline{#1}}

\newcommand{\starderives}{\derives^*}

\newcommand\rn[1]{\textsc{#1}}
\def\from#1\infer#2{{{\textstyle #1}\over{\textstyle #2}}}
\def\axname#1\axiom#2{{\textstyle #2}{\ \textstyle(\mbox{\rn{#1})}}}
\def\rname#1\from#2\infer#3{{{\textstyle #2}\over{\textstyle #3}}{\ \textstyle(\mbox{\rn{#1}})}}
\def\derives{\longrightarrow}
\def\subtype{\sqsubseteq}

\def\super{\mbox{\tt super}}
\def\class{\mbox{\tt class}}
\def\extends{\mbox{\tt extends}}
\def\return{\mbox{\tt return}}
\def\new{\mbox{\tt new}}
\def\this{\mbox{\tt this}}
\def\self{\mbox{\tt self}}
\def\true{\mbox{\tt true}}
\def\inv{\mbox{\em inv}}
\def\mtype{\mbox{\em mtype}}
\def\mbody{\mbox{\em mbody}}
\def\field{\mbox{\em field}}
\def\fields{\mbox{\em fields}}
\def\rc{\mbox{\em rc}}
