\documentclass[nocopyrightspace,preprint,9pt]{sigplanconf}

\usepackage{times-lite}
\usepackage{mathptm}
\usepackage{txtt}
\usepackage{stmaryrd}
\usepackage{code}
%\usepackage{ttquot}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{afterpage}
\usepackage{balance}
\usepackage{defs}
\usepackage{pldefs}
\usepackage{utils}
\usepackage[pdftex]{graphicx}
\usepackage{ifpdf}

\ifpdf
\setlength{\pdfpagewidth}{8.5in}
\setlength{\pdfpageheight}{11in}
\fi


% \input{../../../../vj/res/pagesizes}
% \input{../../../../vj/res/vijay-macros}
\newcommand\alt{\bnf}

\newcommand\Implies{\Rightarrow}

\newtheorem{example}{Example}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}

\newcommand\Xten{{X10}}
\newcommand\java{{Java}}
\newcommand\Java{{\java}}
\newcommand\csharp{{C$\sharp$}}
\newcommand\FXten{{FX10}}
\newcommand\FJ{{FJ}}
\newcommand\CFJ{{CFJ}}

\begin{document}
\title{Constrained Types for Object-Oriented Languages}
\authorinfo{Vijay Saraswat\titlenote{IBM T.~J. Watson Research
Center, P.O. Box 704, Yorktown Heights NY 10598 USA}}{}
  {vsaraswa@us.ibm.com}
\authorinfo{Nathaniel Nystrom$^{\;*}$}{}
  {nystrom@us.ibm.com}
\authorinfo{Radha Jagadeesan\titlenote{School of CTI, DePaul
University, 243 S. Wabash Avenue, Chicago IL 60604 USA}}{}
  {rjagadeesan@cs.depaul.edu}
\authorinfo{Jens Palsberg\titlenote{UCLA Computer Science
Department, Boelter Hall, Los Angeles CA 90095 USA}}{}
  {palsberg@cs.ucla.edu}
\authorinfo{Christian Grothoff\titlenote{
Department of Computer Science, University of Denver,
2360 S. Gaylord Street, John
Green Hall, Room 214, Denver CO, 80208 USA}}{}
  {christian@grothoff.org}

\maketitle

% \conferenceinfo{POPL'08}{XXX}
% \copyrightyear{2008}
% \copyrightdata{[to be supplied]}

\begin{abstract}
\Xten{} is a modern object-oriented language designed for
productivity and performance in concurrent and distributed
systems, such as (heterogenous) multicores and clusters. In this
context, (value-)dependent types arise naturally: objects may be
located at one of many places, arrays may be multidimensional,
activities may be associated with one or more clocks, variables
may be marked as shared or private following an ownership
discipline, etc.  A framework for mostly statically checked
dependent types offers significant opportunities for detecting
design errors statically, documenting design decisions,
eliminating costly runtime checks (e.g., array bounds, null
checks), and improving the quality of code.

We present a simple, general framework for adding
constraint-based dependent types to nominally typed OO languages
such as Java, \Xten{} and Scala. The framework is parametric on
an underlying constraint system {\cal C}. In this system,
classes and interfaces are associated with {\em properties},
i.e., final instance fields. A type {\tt C(:c)} names a class or
interface {\tt C} and a {\em constraint clause} {\tt c} on
properties of {\tt C} and final variables in scope at the type.
Constraint clauses may also be associated with classes
(representing class invariants) and with parameter-lists for
methods and constructors (representing preconditions).

We present many examples to illustrate that common OO idioms can
be accurately captured by constrained types, e.g., place types,
ownership types, array types, clocked types. We have implemented
a version the type system (for a simple equality-based
constraint system) in \Xten{} 1.0 (available at {\tt
x10.sf.net}). We present a simple \FJ{} extension, {\tt
Constrained FJ} and establish fundamental properties such as
type soundess. We compare this approach with relevant work in
dependent types, specifically, DML, and outline many areas of
future work.
\end{abstract}

\section{Introduction}
\label{sec:intro}
\input{intro}

\section{Constrained Java}
\label{sec:lang}
\input{lang}

\section{Constrained FJ}
\label{sec:semantics}
\input{semantics}

\section{Examples}
\label{sec:examples}
\input{examples}

\section{Implementation}
\label{sec:implementation}
\input{impl}

\section{Related work}
\label{sec:related}
\input{related}

\section{Future work}
\label{sec:future}
\input{future}

\section{Conclusions}
\label{sec:conclusions}
\input{conclusion}

\section*{Acknowledgments}

Igor Peshansky,
Lex Spoon,
Vincent Cave.

This material is based upon work supported by the Defense
Advanced Research Projects Agency under its Agreement No.
HR0011-07-9-0002.


\bibliographystyle{plain}
\bibliography{master}
\balance

% \appendix
% \onecolumn

% \section{An extended example}
% \input{longex}

\end{document}
